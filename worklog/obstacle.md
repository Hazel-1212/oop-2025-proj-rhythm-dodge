# Obstacle 類別分類與特性說明

本檔案整理各種障礙物（Obstacle）類型及其行為特性，便於維護與擴充。

---

## 📦 基礎類別: `Obstacle`
- 所有障礙物的父類別
- 具備以下基本屬性：
  - 位置（x, y）
  - 尺寸（w, h）
  - 速度（vx, vy）
- 擁有基本的 `update()` 與 `draw()` 方法（由子類別覆寫）

---

## 🌊 一般矩形障礙物 (`Rect` 為主體)

### 1. `SinObstacle`
- **運動方式：** 垂直方向沿正弦函數擺動
- **初始化參數：**
  - `amplitude`: 擺幅
  - `frequency`: 頻率
- **特性：**
  - y 位置為 `base_y + amplitude * sin(t * frequency)`
  - 週期性震盪

---

### 2. `FollowObstacle`
- **運動方式：** 直線朝玩家方向移動
- **初始化參數：**
  - `player`: 玩家物件
  - `speed`: 移動速度
- **特性：**
  - 啟動時即朝向玩家計算 vx, vy
  - 不會動態調整方向

---

### 3. `LaserObstacle`
- **運動方式：** 靜止或位移中的矩形雷射
- **初始化參數：**
  - `charge_time`: 預熱時間
  - `duration`: 雷射持續時間
- **生命週期：**
  1. 紅色提示淡入
  2. 消失短暫（空白階段）
  3. 細白線擴展成完整寬度
  4. 白線 → 紅線（啟動）
  5. 紅線收縮 → 消失
- **特性：**
  - `activated` 為 True 時具有傷害
  - `expired` 判斷是否移除
  - 多段動畫與透明度控制
  - 單次音效觸發

---

## ⚪ 圓形障礙物 (`CircleObstacle` 為主體)

### 1. `CircleObstacle`
- **運動方式：** 線性移動
- **碰撞方式：** 判斷玩家四角與圓心的最短距離
- **特性：**
  - 使用 `pygame.draw.circle` 繪製
  - 提供 `collide()` 檢查玩家是否碰撞

---

### 2. `FollowCircleObstacle`
- **運動方式：** 直線追蹤玩家
- **特性：**
  - vx, vy 根據初始與玩家距離設定
  - 一旦啟動後不會修正方向

---

### 3. `SinCircleObstacle`
- **運動方式：** 垂直方向沿正弦波上下擺動
- **特性：**
  - y 位置為 `base_y + amplitude * sin(t * frequency)`
  - 實現平滑的上下震盪動畫

---

### 4. `LaserCircleObstacle`
- **運動方式：** 移動後延遲啟動傷害（雷射圓形區域）
- **初始化參數：**
  - `charge_time`: 等待啟動的延遲時間
  - `duration`: 啟動後持續時間
- **特性：**
  - `activated` 為 True 時具有攻擊判定
  - 可設定為靜態或移動中觸發

---

### 5. `GearObstacle`
- **外觀：** 齒輪造型旋轉障礙物
- **運動方式：** 線性移動 + 旋轉
- **初始化參數：**
  - `teeth`: 齒數
  - `rotation_speed`: 每次更新的旋轉角度
- **特性：**
  - 自定義 `draw()` 畫出旋轉三角齒
  - 顯示上具有威嚇性與動態感

---

## ✅ 小結比較表

| 類型 | 運動方式 | 特殊行為 | 是否會追蹤玩家 | 是否有動畫 |
|------|-----------|-------------|------------------|--------------|
| `SinObstacle` | 上下擺動（正弦） | 週期性震盪 | 否 | ✅ |
| `FollowObstacle` | 一次性方向計算 | 線性追蹤 | ✅ | ❌ |
| `LaserObstacle` | 靜態 / 緩慢移動 | 多段動畫 + 雷射效果 | 否 | ✅ |
| `CircleObstacle` | 線性 | 簡單碰撞 | 否 | ❌ |
| `FollowCircleObstacle` | 線性追蹤 | 朝玩家移動 | ✅ | ❌ |
| `SinCircleObstacle` | 垂直擺動 | 正弦震盪 | 否 | ✅ |
| `LaserCircleObstacle` | 延遲觸發 | 半透明 → 紅色啟動 | 否 | ✅ |
| `GearObstacle` | 線性 + 旋轉 | 齒輪動畫 | 否 | ✅ |

---

> 📌 建議：若未來加入更多障礙物，可以考慮將運動邏輯與繪圖邏輯進一步抽象成介面以便管理。

